{{ define "main" }}
<section class="max-w-6xl mx-auto px-4 py-8 md:py-12">
  <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-8 text-center">
    Works
  </h1>

  <!-- カテゴリタブ -->
  <div class="flex flex-wrap justify-center gap-3 md:gap-4 mb-8">
    <button class="tab px-6 py-2.5 rounded-lg font-medium text-sm transition-all duration-300 bg-blue-600 text-white hover:bg-blue-700 shadow-md" data-category="all">
      ALL
    </button>
    <button class="tab px-6 py-2.5 rounded-lg font-medium text-sm transition-all duration-300 bg-white dark:bg-black border border-gray-200 dark:border-white text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-900" data-category="wallpaper">
      WALLPAPER
    </button>
    <button class="tab px-6 py-2.5 rounded-lg font-medium text-sm transition-all duration-300 bg-white dark:bg-black border border-gray-200 dark:border-white text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-900" data-category="icon">
      ICON
    </button>
    <button class="tab px-6 py-2.5 rounded-lg font-medium text-sm transition-all duration-300 bg-white dark:bg-black border border-gray-200 dark:border-white text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-900" data-category="other">
      OTHER
    </button>
  </div>

  <!-- 統一カードグリッド -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {{ range where .Pages "Params.show_in_list" "ne" false }}    
    <div class="content-card bg-white dark:bg-black border border-gray-200 dark:border-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-1" data-category="{{ index .Params.categories 0 }}">
      <a href="{{ .RelPermalink }}" class="block">
        <div class="w-full h-48 overflow-hidden bg-gray-100 dark:bg-gray-700">
          {{ if .Params.image }}
            <img src="{{ .Params.image }}" alt="{{ .Title }}" class="w-full h-full object-cover transition-transform duration-300 hover:scale-110">
          {{ else }}
            <img src="/img/noimage.png" alt="No image" class="w-full h-full object-cover">
          {{ end }}
        </div>

        <div class="p-6">
          <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-2 line-clamp-2">
            {{ .Title }}
          </h2>
          <p class="text-sm text-gray-500 dark:text-white mb-3">
            {{ .Date.Format "2006-01-02" }}
            {{ with .Params.categories }}
              ・<span class="px-2 py-0.5 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded text-xs font-medium">
                {{ index . 0 | upper }}
              </span>
            {{ end }}
          </p>
          {{ with .Summary }}
            <p class="text-gray-600 dark:text-white text-sm line-clamp-3">
              {{ . | plainify | truncate 80 }}
            </p>
          {{ end }}
        </div>
      </a>
    </div>
    {{ end }}
  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll(".tab");
  const cards = document.querySelectorAll(".content-card");

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      const category = tab.dataset.category;
      
      tabs.forEach(t => {
        t.classList.remove("bg-blue-600", "text-white", "hover:bg-blue-700");
        t.classList.add("bg-white", "dark:bg-black", "border", "border-gray-200", "dark:border-white", "text-gray-700", "dark:text-white", "hover:bg-gray-100", "dark:hover:bg-gray-900");
      });
      
      tab.classList.remove("bg-white", "dark:bg-black", "border", "border-gray-200", "dark:border-white", "text-gray-700", "dark:text-white", "hover:bg-gray-100", "dark:hover:bg-gray-900");
      tab.classList.add("bg-blue-600", "text-white", "hover:bg-blue-700");

      cards.forEach(card => {
        if (category === "all" || card.dataset.category === category) {
          card.style.display = "block";
        } else {
          card.style.display = "none";
        }
      });
    });
  });
});
</script>
{{ end }}
